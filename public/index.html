<!DOCTYPE html>
<html>
<head>
    <title>Stella</title>
    
    <!-- jQuery -->
    <script src="./javascripts/jquery-1.6.2.js"></script>
    <script src="./javascripts/jquery.ui.core.js"></script>
    <script src="./javascripts/jquery-ui-1.8.13.custom.min.js"></script>
    <link rel="stylesheet" href="./stylesheets/jquery-ui-1.8.13.custom.css" />
    
    <!-- nickEdit -->
    <script type="text/javascript" src="./javascripts/nicEdit.js"></script>
    
    <script type="text/javascript" src="./javascripts/knockout-2.2.0.js"></script>
    <!-- <script type="text/javascript" src="./javascripts/knockout-2.2.0.debug.js"></script>-->
    
    <!-- special web fonts -->
<!--
    <link href='http://fonts.googleapis.com/css?family=Oleo+Script+Swash+Caps:bold&effect=shadow-multiple&text=Stella' rel='stylesheet' type='text/css'>
-->
    
    <link rel="stylesheet" href="./stylesheets/main.css">
    
</head>
<body>

	<div id="main" class="stella-view" data-bind="visible: selectedProject, with: selectedProject">
		<div class="workspace">
			<!-- ko foreach: scenes -->
				<div class="index-card scene-container" data-bind="css: {selected: selected}">
					<div class="ui-widget-header scene-title">
						<span data-bind="visible: !titleEditing(), text: title">&nbsp;</span>
						<a href="#" data-bind="visible: !titleEditing(), click: editTitle">edit</a>
						<input data-bind="visible: titleEditing, value: title, hasfocus: titleEditing" />
						<a href="#" class="checkbox scene-select-button" data-bind="click: toggleSelected" title="select/deselect">
							<img style="width:16px;height:16px" src="images/checkbox_unchecked_icon&16.png" data-bind="visible: !selected()"/>
							<img style="width:16px;height:16px" src="images/checkbox_checked_icon&16.png" data-bind="visible: selected"/>
						</a>
					</div>
					<div class="scene-body">
						<div class="scene-content" contenteditable="true" data-bind="htmlValue:content"></div>
					</div>
					<hr class="scene-body-separator" />
					<ol class="issue-area">
						<!-- ko foreach: issues -->
						<li class="issue-container">
							<input class="span-like issue-content" data-bind="value:content" />
						</li>
						<!-- /ko -->
						<a href="#" class="button" style="position:absolute; top:0; right: 4px" data-bind="click:addIssue">new issue</a>
					</ol>
				</div>
				
				<div style="height: 10px; border: dashed 4px black;" data-bind="click: function (){ $root.insertSceneAfter($data) }"></div>
			<!--/ko -->
			
			<div style="-webkit-column-break-after: always;"></div>
			
			<div data-bind="foreach: annotations">
				<div class="annotation-container"  data-bind="positionOffset: position">
					<div contenteditable="true" data-bind="htmlValue:content"></div>
				</div>
			</div>
		</div>
	</div>

	<div id="toolbar">
		<div id="header">
			<!--ko with: selectedProject -->
				<a href="#" id="project-save-button" class="button" data-bind="click: save" title="save the project">
					<img style="width:16px;height:16px" src="images/save_icon&16.png" />
				</a>
				<a href="#" id="delete-button" class="button" data-bind="click: destroy" title="delete">
					<img style="width:16px;height:16px" src="images/delete_icon&16.png" />
				</a>
				<span class="project-name-container">Project name</span>
				<a href="#" id="project-refresh-button" class="button" data-bind="click: load" title="refresh the project">
					<img style="width:16px;height:16px" src="images/refresh_icon&16.png" />
				</a>
			<!-- /ko -->
			<div style="float: right">
				<a href="#!/dashboard" class="button" data-bind="click: goToDashboard" title="dashboard">
					<img style="width:24px;height:24px" src="images/dashboard_icon&24.png" />
				</a>
				<span class="app-title font-effect-shadow-multiple" style="font-family: 'Oleo Script Swash Caps', cursive">Stella</span>
			</div>
		</div>
		<!-- toolbar 2nd -->
		<div id="myNicPanel" data-bind="visible: selectedProject"></div>
	</div>

<div id="#dashboard-main" style="margin-top:30px" data-bind="
	visible: !selectedProject(),
	with: dashboard
">
	 <div class="project-summary" data-bind="
		with: projectSummary,
		css: {loading: projectSummary.loading()}
	">
		<h3>Project Summary</h3>
		<div data-bind="foreach: items">
			<div class="gadget" style="float:both">
				<div>
					<div class="gadget-header">
					<a href="#!/projects/1" data-bind=" click: function () {$root.goToProject(1)}">
						<img style="width:24px;height:24px" src="./images/book_side_icon&24.png" />
						<span class="project-summary-project-name">Project name</span>
					</a>
					</div>
					<div style="display:inline-block" title="number of scenes">
						<img style="width:16px;height:16px" src="./images/document_icon&16.png" /><span style="font-size:0.7em">&times;</span><span data-bind="text:sceneCount"></span>
					</div>
					<ol class="project-summary-issue-list" data-bind="foreach: issues">
						<li><span data-bind="text: content"></span></li>
					</ol>
				</div>
			</div>
		</div>
	</div>
</div>
<script type="text/javascript" src="./javascripts/main.js"></script>
</body>
</html>
